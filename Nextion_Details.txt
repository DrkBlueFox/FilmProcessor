---

âœ… Touch-Eingabe verarbeiten

Jetzt kannst du einfach die Komponentennummern deiner Buttons auswerten:

void handleTouch(byte page, byte component) {
  if (page == 0 && component == 1) {
    // Start-Button gedrÃ¼ckt
    logEvent("Start-Button gedrÃ¼ckt");
    startLeaderEinzug();
  }
  else if (page == 0 && component == 2) {
    // Stop-Button gedrÃ¼ckt
    logEvent("Notstopp");
    emergencyStop();
  }
  else if (page == 2 && component == 1) {
    // Wartungseintrag 1 bestÃ¤tigen
    acknowledgeMaintenance(0);
  }
}


---

âœ… Was musst du im Nextion Editor tun?

FÃ¼r jeden Button:

â€œSend Component IDâ€ aktivieren (Touch Event)

Optional: â€žSend Release Eventâ€œ oder â€žSend Press Eventâ€œ je nach Bedarf




---

âœ… Zusammenfassung

Mit dieser Touchlogik kannst du:

alle Buttonklicks eindeutig erkennen

wartungsfreundlich im Code verarbeiten

das Ganze spÃ¤ter als Mappingtabelle oder Switch-Case strukturieren



---

MÃ¶chtest du daraus eine touch.h machen, die du einfach einbinden kannst?











Perfekt â€“ dann kÃ¼mmern wir uns jetzt um die Auswertung von Touch-Eingaben vom Nextion-Display am ESP32.


---

âœ… Touch-Auswertung vom Nextion

Nextion sendet bei Touchereignissen einfache Bytefolgen Ã¼ber die serielle Schnittstelle.
Du kannst diese mit Serial2.read() abfangen und auswerten.


---

ðŸ§© Beispielhafte Touch-Nachricht vom Display:

Wenn du bei einem Button "b0" die Option â€œSend Component IDâ€ aktivierst, sendet das Display:

65 00 01 01 FF FF FF

Byte	Bedeutung

0x65	Touch Event Header
0x00	Page-ID
0x01	Component-ID
0x01	Event Type: 1 = TouchPress
0xFF 0xFF 0xFF	Abschlusskennung



---

âœ… Struktur zur Verarbeitung in deinem Code

Wir bauen dir eine Funktion, die Touch-Ereignisse prÃ¼ft und dann reagiert:

void checkTouchInput() {
  if (NEXTION.available() >= 7) {
    byte buffer[7];
    for (int i = 0; i < 7; i++) {
      buffer[i] = NEXTION.read();
    }

    // Touch Event Header + Terminator prÃ¼fen
    if (buffer[0] == 0x65 && buffer[4] == 0xFF && buffer[5] == 0xFF && buffer[6] == 0xFF) {
      byte pageID = buffer[1];
      byte compID = buffer[2];
      byte eventType = buffer[3];

      if (eventType == 0x01) { // TouchPress
        handleTouch(pageID, compID);
      }
    }
  }
}


---

âœ… Touch-Eingabe verarbeiten

Jetzt kannst du einfach die Komponentennummern deiner Buttons auswerten:

void handleTouch(byte page, byte component) {
  if (page == 0 && component == 1) {
    // Start-Button gedrÃ¼ckt
    logEvent("Start-Button gedrÃ¼ckt");
    startLeaderEinzug();
  }
  else if (page == 0 && component == 2) {
    // Stop-Button gedrÃ¼ckt
    logEvent("Notstopp");
    emergencyStop();
  }
  else if (page == 2 && component == 1) {
    // Wartungseintrag 1 bestÃ¤tigen
    acknowledgeMaintenance(0);
  }
}


---

âœ… Was musst du im Nextion Editor tun?

FÃ¼r jeden Button:

â€œSend Component IDâ€ aktivieren (Touch Event)

Optional: â€žSend Release Eventâ€œ oder â€žSend Press Eventâ€œ je nach Bedarf




---

âœ… Zusammenfassung

Mit dieser Touchlogik kannst du:

alle Buttonklicks eindeutig erkennen

wartungsfreundlich im Code verarbeiten

das Ganze spÃ¤ter als Mappingtabelle oder Switch-Case strukturieren



---

MÃ¶chtest du daraus eine touch.h machen, die du einfach einbinden kannst?

